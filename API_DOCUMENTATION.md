# API Documentation

| Orders (Index) | Route | Method | Middlewares | Request | Response |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | /api/auth/register | POST | `upload.single("avatar")`, `requireFields(["name", "email", "password", "phone", "address"])` | **Body:** `name` (string, required), `email` (string, required), `password` (string, required), `phone` (string, required), `address` (string, required), `avatar` (file, optional) | **201 Created:** `{"success": true, "message": "User registered successfully. Please check your email to verify your account."}`, **400 Bad Request:** `{"success": false, "message": "Missing required fields."}`, **409 Conflict:** `{"success": false, "message": "Email already exists."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error"}` |
| 2 | /api/auth/verify | GET | None | **Query:** `token` (string, required) | **200 OK:** `{"success": true, "message": "Account verified successfully."}`, **400 Bad Request:** `{"success": false, "message": "Missing token."}`, **404 Not Found:** `{"success": false, "message": "Invalid or expired token."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error"}` |
| 3 | /api/auth/login | POST | `Validation.email`, `Validation.password`, `requireFields(["email", "password"])`, `checkUserStatusByEmail()` | **Body:** `email` (string, required), `password` (string, required) | **200 OK:** `{"success": true, "message": "Login successful.", "data": {"accessToken": "...", "refreshToken": "..."}}`, **400 Bad Request:** `{"success": false, "message": "Missing required fields."}`, **401 Unauthorized:** `{"success": false, "message": "Invalid credentials."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error"}` |
| 4 | /api/auth/refresh-token | GET | `verifyRefreshToken` | **Headers:** `Cookie` (containing `refreshToken`) | **200 OK:** `{"success": true, "message": "Access token refreshed successfully.", "data": {"accessToken": "..."}}`, **401 Unauthorized:** `{"success": false, "message": "Invalid or expired refresh token."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error"}` |
| 5 | /api/auth/logout | POST | `credentials`, `verifyRole(["User"])` | None | **200 OK:** `{"success": true, "message": "Log out successfully"}` |
| 6 | /api/auth/login-google | POST | `requireFields(["code"])` | **Body:** `code` (string, required) | **200 OK:** `{"success": true, "message": "Login successful.", "data": {"accessToken": "...", "refreshToken": "..."}}`, **400 Bad Request:** `{"success": false, "message": "Missing code."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error"}` |
| 7 | /api/user/forgot-password | POST | `credentials`, `requireFields(["email"])`, `checkUserStatusByEmail()` | **Body:** `email` (string, required) | **200 OK:** `{"success": true, "message": "Email has been sent. Check your mailbox"}`, **404 Not Found:** `{"success": false, "message": "Email does not exist in our system."}`, **429 Too Many Requests:** `{"success": false, "message": "Too many requests. Please try again later"}` |
| 8 | /api/user/reset-password | POST | `credentials`, `requireFields(["email", "token", "password"])`, `Validation.email`, `Validation.password`, `checkUserStatusByEmail()`, `verifyResetPasswordToken` | **Body:** `email` (string, required), `token` (string, required), `password` (string, required) | **200 OK:** `{"success": true, "message": "Password has been reset successfully."}`, **400 Bad Request:** `{"success": false, "message": "Invalid or expired token."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error"}` |
| 9 | /api/user/profile | GET | `credentials` | None | **200 OK:** `{"success": true, "message": "Profile retrieved successfully.", "data": {"id": 1, "name": "...", "email": "...", ...}}`, **404 Not Found:** `{"success": false, "message": "User not found."}`, **500 Internal Server Error:** `{"success": false, "message": "Error fetching user profile."}` |
| 10 | /api/user/update-profile | PATCH | `credentials` | **Body:** `name` (string, optional), `phone` (string, optional), `address` (string, optional) | **200 OK:** `{"success": true, "message": "Profile updated successfully.", "data": {"id": 1, "name": "...", ...}}`, **400 Bad Request:** `{"success": false, "message": "Failed to update profile."}`, **401 Unauthorized:** `{"success": false, "message": "Unauthorized: User ID not found."}`, **500 Internal Server Error:** `{"success": false, "message": "System error occurred."}` |
| 11 | /api/user/update-avatar | PATCH | `upload.single("avatar")`, `credentials`, `verifyRole(["User"])` | **Body:** `avatar` (file, required) | **200 OK:** `{"success": true, "message": "Avatar updated successfully.", "data": {"avatar": "...", "url": "..."}}`, **400 Bad Request:** `{"success": false, "message": "No image file provided."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error during avatar update."}` |
| 12 | /api/user/change-email | POST | `credentials`, `verifyRole(["User"])`, `requireFields(["email", "password"])`, `Validation.email`, `Validation.password` | **Body:** `email` (string, required), `password` (string, required) | **200 OK:** `{"success": true, "message": "Email has been sent. Check your mailbox"}`, **400 Bad Request:** `{"success": false, "message": "Invalid credentials."}`, **429 Too Many Requests:** `{"success": false, "message": "Error while trying to send email. Please try again later"}` |
| 13 | /api/user/reset-email | POST | `credentials`, `requireFields(["email", "token"])`, `verifyResetEmailToken` | **Body:** `email` (string, required), `token` (string, required) | **200 OK:** `{"success": true, "message": "Email has been changed successfully."}`, **400 Bad Request:** `{"success": false, "message": "Invalid or expired token."}`, **500 Internal Server Error:** `{"success": false, "message": "Internal Server Error"}` |
| 14 | /api/colors | GET | None | None | **200 OK:** `{"success": true, "message": "Colors retrieved successfully.", "data": [...]}` |
| 15 | /api/colors/:id | GET | `Validation.numberIDParam` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Color retrieved successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Color not found."}` |
| 16 | /api/admin/colors | POST | `credentials`, `verifyRole(["Admin"])` | **Body:** `name` (string, required), `hex` (string, required) | **201 Created:** `{"success": true, "message": "Color created successfully.", "data": {...}}`, **400 Bad Request:** `{"success": false, "message": "Color already exists."}` |
| 17 | /api/admin/colors/:id | PUT | `credentials`, `verifyRole(["Admin"])` | **Params:** `id` (number, required), **Body:** `name` (string, optional), `hex` (string, optional) | **200 OK:** `{"success": true, "message": "Color updated successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Color not found."}` |
| 18 | /api/admin/colors/:id | DELETE | `credentials`, `verifyRole(["Admin"])` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Color deleted successfully."}`, **404 Not Found:** `{"success": false, "message": "Color not found."}` |
| 19 | /api/brands | GET | None | None | **200 OK:** `{"success": true, "message": "Brands retrieved successfully.", "data": [...]}` |
| 20 | /api/brands/:id | GET | `Validation.numberIDParam` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Brand retrieved successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Brand not found."}` |
| 21 | /api/admin/brands | POST | `credentials`, `verifyRole(["Admin"])` | **Body:** `name` (string, required) | **201 Created:** `{"success": true, "message": "Brand created successfully.", "data": {...}}`, **400 Bad Request:** `{"success": false, "message": "Brand already exists."}` |
| 22 | /api/admin/brands/:id | PUT | `credentials`, `verifyRole(["Admin"])` | **Params:** `id` (number, required), **Body:** `name` (string, required) | **200 OK:** `{"success": true, "message": "Brand updated successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Brand not found."}` |
| 23 | /api/admin/brands/:id | DELETE | `credentials`, `verifyRole(["Admin"])` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Brand deleted successfully."}`, **404 Not Found:** `{"success": false, "message": "Brand not found."}` |
| 24 | /api/cart/add-product | POST | `credentials`, `verifyRole(["User"])`, `requireFields(["productID"])` | **Body:** `productID` (number, required) | **200 OK:** `{"success": true, "message": "Product added to cart successfully."}`, **400 Bad Request:** `{"success": false, "message": "Product is already in the cart."}`, **404 Not Found:** `{"success": false, "message": "Product or Cart not found."}` |
| 25 | /api/cart/remove-product/:id | DELETE | `credentials`, `verifyRole(["User"])` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Product removed from cart successfully."}`, **404 Not Found:** `{"success": false, "message": "Product not found in cart."}` |
| 26 | /api/cart/all-products | GET | `credentials`, `verifyRole(["User"])` | None | **200 OK:** `{"success": true, "message": "Cart products retrieved successfully.", "data": [...]}` |
| 27 | /api/cart | POST | `credentials`, `checkUserStatusByID()`, `verifyRole(["Admin"])` | None | **201 Created:** `{"success": true, "message": "Cart created successfully."}`, **409 Conflict:** `{"success": false, "message": "Cart already exists for this user."}` |
| 28 | /api/cart | DELETE | `credentials`, `checkUserStatusByID()`, `verifyRole(["Admin"])` | None | **200 OK:** `{"success": true, "message": "Cart deleted successfully."}`, **404 Not Found:** `{"success": false, "message": "Cart not found."}` |
| 29 | /api/cart | GET | `credentials`, `checkUserStatusByID()` | None | **200 OK:** `{"success": true, "message": "Carts retrieved successfully.", "data": [...]}` |
| 30 | /api/payment/process | POST | `credentials`, `requireFields(["orderID", "paymentMethod"])` | **Body:** `orderID` (number, required), `paymentMethod` (string, required, "COD" or "credit_card") | **200 OK:** `{"success": true, "message": "Payment processed successfully."}`, **400 Bad Request:** `{"success": false, "message": "Payment has already been made for this order."}`, **404 Not Found:** `{"success": false, "message": "Order not found."}` |
| 31 | /api/payment/cancel | DELETE | `credentials`, `requireFields(["orderID"])` | **Body:** `orderID` (number, required) | **200 OK:** `{"success": true, "message": "Payment canceled successfully."}`, **404 Not Found:** `{"success": false, "message": "Payment for this order was not found."}` |
| 32 | /api/product | GET | None | None | **200 OK:** `{"success": true, "message": "Products retrieved successfully.", "data": [...]}` |
| 33 | /api/product/search | GET | None | **Query:** `query` (string, required) | **200 OK:** `{"success": true, "message": "Products retrieved successfully.", "data": [...]}` |
| 34 | /api/product/brand/:brandID | GET | `Validation.numberIDParam` | **Params:** `brandID` (number, required) | **200 OK:** `{"success": true, "message": "Products retrieved successfully.", "data": [...]}` |
| 35 | /api/product/:id | GET | `Validation.numberIDParam` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Product retrieved successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Product not found."}` |
| 36 | /api/admin/products | POST | `credentials`, `verifyRole(["Admin"])`, `upload.array("thumbnail")`, `requireFields(["name", "description", "price", "active", "brandID", "category"])` | **Body:** `name` (string, required), `description` (string, required), `price` (number, required), `active` (boolean, required), `brandID` (number, required), `category` (array of strings, required), `discount` (number, optional), `thumbnail` (files, optional) | **201 Created:** `{"success": true, "message": "Product created successfully.", "data": {...}}` |
| 37 | /api/admin/products/:id | PUT | `credentials`, `verifyRole(["Admin"])`, `upload.array("thumbnail")` | **Params:** `id` (number, required), **Body:** `name` (string, optional), `description` (string, optional), `price` (number, optional), `active` (boolean, optional), `brandID` (number, optional), `category` (array of strings, optional), `discount` (number, optional), `remove_public_id` (array of strings, optional) | **200 OK:** `{"success": true, "message": "Product updated successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Product not found."}` |
| 38 | /api/admin/products/:id | DELETE | `credentials`, `verifyRole(["Admin"])` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Product deleted successfully."}`, **404 Not Found:** `{"success": false, "message": "Product not found."}` |
| 39 | /api/variant | GET | `credentials`, `verifyRole(["User"])` | None | **200 OK:** `{"success": true, "message": "Variants retrieved successfully.", "data": [...]}` |
| 29 | /api/cart | GET | `credentials`, `checkUserStatusByID()` | None | **200 OK:** `{"success": true, "message": "Cart retrieved successfully for the user.", "data": [...]}` |
| 41 | /api/variant/get-by-id/:id | GET | `credentials`, `verifyRole(["User"])` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Variant retrieved successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Variant not found."}` |
| 42 | /api/admin/variants | POST | `credentials`, `verifyRole(["Admin"])` | **Body:** `productID` (number, required), `size` (number, required), `colorID` (number, required), `quantity` (number, required) OR `variants` (array of objects, required) | **201 Created:** `{"success": true, "message": "Variant(s) created successfully.", "data": [...]}` |
| 43 | /api/admin/variants/:id | PUT | `credentials`, `verifyRole(["Admin"])` | **Params:** `id` (number, required), **Body:** `size` (number, optional), `colorID` (number, optional), `quantity` (number, optional) | **200 OK:** `{"success": true, "message": "Variant updated successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Variant not found."}` |
| 44 | /api/admin/variants/:id | DELETE | `credentials`, `verifyRole(["Admin"])` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Variant deleted successfully."}`, **404 Not Found:** `{"success": false, "message": "Variant not found."}` |
| 45 | /api/order | POST | `credentials`, `checkUserStatusByID()`, `requireFields(["shippingAddress", "paymentMethod", "items"])` | **Body:** `shippingAddress` (string, required), `paymentMethod` (string, required, "COD" or "credit_card"), `items` (array of objects, required) | **201 Created:** `{"success": true, "message": "Order created successfully.", "data": {...}}` |
| 46 | /api/order | GET | `credentials`, `checkUserStatusByID()` | None | **200 OK:** `{"success": true, "message": "Orders retrieved successfully.", "data": [...]}` |
| 47 | /api/order/:id | GET | `credentials`, `checkUserStatusByID()`, `Validation.numberIDParam` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Order retrieved successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Order not found or you do not have permission to view it."}` |
| 48 | /api/order/:id/cancel | PUT | `credentials`, `checkUserStatusByID()`, `Validation.numberIDParam` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Order canceled successfully."}`, **404 Not Found:** `{"success": false, "message": "Order not found or you do not have permission to cancel it."}` |
| 49 | /api/order/:id/address | PATCH | `credentials`, `checkUserStatusByID()`, `Validation.numberIDParam`, `requireFields(["shippingAddress"])` | **Params:** `id` (number, required), **Body:** `shippingAddress` (string, required) | **200 OK:** `{"success": true, "message": "Shipping address updated successfully."}`, **404 Not Found:** `{"success": false, "message": "Order not found or you do not have permission to update it."}` |
| 50 | /api/admin/orders | GET | `credentials`, `verifyRole(["Admin"])` | None | **200 OK:** `{"success": true, "message": "Orders retrieved successfully.", "data": [...]}` |
| 51 | /api/admin/orders/:id | GET | `credentials`, `verifyRole(["Admin"])`, `Validation.numberIDParam` | **Params:** `id` (number, required) | **200 OK:** `{"success": true, "message": "Order retrieved successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Order not found."}` |
| 52 | /api/admin/orders/:id/status | PUT | `credentials`, `verifyRole(["Admin"])`, `Validation.numberIDParam`, `requireFields(["status"])` | **Params:** `id` (number, required), **Body:** `status` (string, required) | **200 OK:** `{"success": true, "message": "Order status updated successfully.", "data": {...}}`, **404 Not Found:** `{"success": false, "message": "Order not found."}` |
